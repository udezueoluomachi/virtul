<!DOCTYPE html>
<html dir="ltr" lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="keywords" content="Virtul, crypto investment"/>
        <meta name="description" content="Make a deposite to your Virtul wallet to start trading seamlessly"/>
        <title>Virtul - Deposit funds</title>
        <meta name="og:title" content="Virtul - Deposit funds" />
        <meta name="og:description" content="Make a deposite to your Virtul wallet to start trading seamlessly" />
        <meta name="og:site_name" content="Virtul" />
        <meta name="og:url" content="https://Virtul.net/deposit" />
        <meta name="og:type" content="stock trading" />
        <meta name="og:image" content="https://Virtul.net/images/social-media/buy.jpg" />
        <meta property="twitter:url" content="https://Virtul.net/deposit">
        <meta property="twitter:description" content="Make a deposite to your Virtul wallet to start trading seamlessly">
        <meta property="twitter:image" content="https://Virtul.net/images/social-media/buy.jpg">
        <meta property="twitter:title" content="Virtul - Deposit funds">
        <noscript>
            <meta http-equiv="refresh" content="20; ../noscript/index.html"/>
        </noscript>
        <link rel="stylesheet" href="../styles/css/all.css"/>
        <link rel="stylesheet" href="../styles/animate.css">
        <link rel="icon" href="../images/favicon.png" sizes="16x16"/>
        <link rel="stylesheet" href="../styles/main.min.css"/>
        <script type="text/javascript" src="../scripts/jquery.js"></script>
        <script src="../scripts/url.js"></script>
        <script type="text/javascript" src="../node_modules/sweetalert/dist/sweetalert.min.js"></script>
        <script type="text/javascript" src="../scripts/main.js"></script>
        <style>
            .input-section {
                margin-top: 20px;
            }
        </style>
    </head>
    <body>
        <div class="body">
            <div class="header flex-box">
                <div class="header-content">
                    <img src="../images/logo.png" id="logo"/>
                </div>
                <div class="nav-at-header">
                    <a href="../dashboard" class="footer-nav-link text-grey-variant-2-color">
                        <i class="fas fa-home"></i>
                    </a>
                    <a href="../trade" class="footer-nav-link active">
                        <i class="fas fa-exchange-alt"></i>
                    </a>
                    <a href="../wallet" class="footer-nav-link text-grey-variant-2-color active">
                        <i class="fas fa-wallet"></i>
                    </a>
                </div>
                <div class="header-content menu-or-menu-btn-toggle text-default-blue-color">
                        <i class="fas fa-bars"></i>
                </div>
            </div>
            <div class="body-content">
                <div class="side-menu animate__animated animate__slideinright">
                    <div class="flex-box header no-border">
                        <div class="header-content menu-or-menu-btn-toggle">
                            <i class="fas fa-arrow-left"></i>
                        </div>
                        <p class="header-content mini-size bold text-grey-variant-2-color">Menu</p>
                        <div class="header-content text-grey-variant-2-color" style="font-size: 20px;">
                                <i class="fas fa-question-circle"></i>
                        </div>
                    </div>
                    <!--Notifications (<span class="number-of-new-notifications">0</span>) new-->
                    <div class="necessary-links-in-wallet-page-cont smaller-size">
                        <a href="../notifications" class="flex-box" title="notifications">
                            <p>
                                Notifications
                            </p>
                            <p>
                                <i class="fas fa-bell" style="transform: rotate(-20deg);"></i>
                            </p>
                        </a>
                        <a href="../send" class="flex-box" title="send to others">
                            <p>
                                Send
                            </p>
                            <p>
                                <i class="fas fa-sign-in-alt" style="transform: rotate(-90deg);"></i>
                            </p>
                        </a>
                        <a href="../receive" class="flex-box" title="receive from others">
                            <p>
                                Receive
                            </p>
                            <p>
                                <i class="fas fa-sign-in-alt" style="transform: rotate(90deg);"></i>
                            </p>
                        </a>
                        <a href="../earn" class="flex-box" title="earn crypto stocks">
                            <p>
                                Earn more
                            </p>
                            <p>
                                <i class="fas fa-arrow-right"></i>
                            </p>
                        </a>
                        <a href="../settings" class="flex-box" title="settiings">
                            <p>
                                Settings
                            </p>
                            <p>
                                <i class="fas fa-cog"></i>
                            </p>
                        </a>
                        <a href="javascript:void(0);" class="flex-box logout-btn bold" title="earn crypto stocks">
                            <p class="text-default-blue-color">
                                Logout
                            </p>
                            <p>
                                <i class="fas fa-user"></i>
                            </p>
                        </a>
                        <div class="advertizement-cont">
                            <p class="text-grey-variant-2-color">
                                Advertisement
                            </p>
                            <div class="advertizement-main-cont">
                                <div class="advertizement-content"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="main-content">
                    <div class="price-in-main-content fixed">
                        <p class="text-grey-variant-2-color">
                            <i class="fas fa-chart-line"></i> 1 omc = <span class="current-price-of-omc-cont">---</span> usd
                        </p>
                        <br/>
                    </div>
                    <div class="form-and-form-nav-cont" style="margin-top:-18px;">
                        <div class="form-cont">
                            <form action="#deposit.js" method="POST" enctype="application/x-www-form-urlencoded" name="stock-depositing-form">
                                <p class="text-grey-variant-2-color">
                                    An email would be sent to you to process the deposit if your prefered payment method is cryptocurrency.
                                </p>
                                <select name="payment-method" id="payment-method" class="input-section text-grey-variant-2-color">
                                    <option value="">
                                        Payment method
                                    </option>
                                    <option value="crypto">
                                        Crypto currency (coinbase)
                                    </option>
                                </select>
                                <br/>
                                <br/>
                                <br/><!--pattern="/[0-9]/"-->
                                <label for="amount-to-deposit-in-usd" class="text-grey-variant-2-color">Amount to deposite in USD</label>
                                <input type="number" id="amount-to-deposit-in-usd" class="input-section text-grey-variant-2-color usd-input" name="amount-to-deposit-in-usd" placeholder="0.0" required/>
                                <br/>
                                <input type="submit" class="input-section bg-reddish-purple text-white-color" value="Deposit" disabled>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="nav-at-footer flex-box">
                <a href="../dashboard" class="footer-nav-link text-grey-variant-2-color">
                    <i class="fas fa-home text-grey-variant-2-color"></i>
                </a>
                <a href="../trade" class="footer-nav-link">
                    <i class="fas fa-exchange-alt active"></i>
                </a>
                <a href="../wallet" class="footer-nav-link text-grey-variant-2-color">
                    <i class="fas fa-wallet active"></i>
                </a>
            </div>
        </div>
        <!--modal.js template-->
        <div class="modal-box-cont">
            <div class="modal-box">
                <div class="modal-content-text">
                    <p class="centered-text mini-size">
                    </p>
                </div>
                <div class="modal-toggle">
                </div>
            </div>
        </div>
        <!--loader template-->
        <div class="loader-box-cont">
            <div class="loader-box">
                <div class="loader-content-cont">
                    <img id="logo-in-loader" src="../images/favicon.png"/>
                    <div class="loader-balls-cont flex-box">
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                        <div class="loader-ball"></div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $("*").ready(
                () => {
                    //auth
                    if(!localStorage) {
                        swal("Session canceled" , "Your browser does not support cookies or it has been disabled. Try enabling all cookies and try again" , "warning");
                    }
                    let credentials;
                    if(localStorage.getItem("credentials")) {
                        credentials = JSON.parse(localStorage.getItem("credentials"));
                        if(JSON.parse(localStorage.getItem("credentials")).verified_email === 0) {
                            location.assign("../verify");
                        }
                    }
                    else {
                        location.assign("../login");
                    }
                    //dom
                    const payment_method_input = $("#payment-method");
                    const amount_to_deposit_in_usd_input = $("#amount-to-deposit-in-usd");
                    const form_submition_btn = $("input[type='submit']");
                    const inputs = [payment_method_input , amount_to_deposit_in_usd_input];
                    let amount_is_empty_or_zero = true;
                    let payment_method_not_chosen = true;

                    function send_data(data, callback) {
                        $(".loader-box-cont").css("display","flex");
                        const xhttp = new XMLHttpRequest();
                        xhttp.onload = function() {
                            $(".loader-box-cont").css("display","none");
                            let response = this.responseText;
                            callback(response);
                        };
                        xhttp.open("POST",transactions_server_url,true);
                        xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                        xhttp.send(data);
                    }

                    function validate_form_data() {
                        amount_to_deposit_in_usd_input.val() == "" || amount_to_deposit_in_usd_input.val() == 0 ? amount_is_empty_or_zero = true : amount_is_empty_or_zero = false;
                        payment_method_input.val() === "" ? payment_method_not_chosen = true : payment_method_not_chosen = false;
                        !amount_is_empty_or_zero && !payment_method_not_chosen ? form_submition_btn.attr("disabled",false) : form_submition_btn.attr("disabled",true);
                    }

                    inputs.forEach(e => {
                        e.on("input" , validate_form_data);
                        e.on("focus" , validate_form_data);
                        e.on("blur" , validate_form_data);
                        e.on("change" , validate_form_data);
                        e.on("keyup" , validate_form_data);
                    });

                    form_submition_btn.click(
                        e => {
                            e.preventDefault();
                            if(payment_method_input.val() == "crypto") {
                                //process for crypto payment
                                let req_obj = {
                                    req_name : "deposit",
                                    usd_amount : amount_to_deposit_in_usd_input.val().trim(),
                                    email_address : credentials.email_address,
                                    password : credentials.password,
                                    method : "crypto"
                                };
                                send_data(`content=${JSON.stringify(req_obj)}`,
                                    response => {
                                        //
                                        if(response === "incorrect-credentials") {
                                            swal("Access denied", "Try logging out and loggin back in then continue the process","error");
                                        }
                                        else {
                                            location.assign(response);
                                        }
                                    }
                                );
                            }
                            else {
                                //process for other payment methods
                            }
                        }
                    );
                }
            );
        </script>
    </body>
</html>